<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="home" name="Social Home">
        <t t-call="website.layout">
            <div t-attf-class="h-100 dr_website_social #{'dr-onboarding-mode' if isOnbording else ' '}">
                <div class="container pb-2"> </div>  <!-- clear fix -->

                <div class="container">

                    <!-- HEADER -->
                    <div class="d-flex bg-white rounded justify-content-between border mt-4 p-3">
                        <div>
                            <h4 class="mb-0"> Your social accounts </h4>
                        </div>
                        <div class="pr-2">
                            <button type="button" class="dr_social_link btn btn-fill-primary h-100 py-0 float-right shadow-sm text-white">
                                <span class="fa fa-plus" style="font-size: 13px;padding-right: 3px;"></span>
                                    <b> LINK NEW ACCOUNT </b>
                            </button>
                        </div>
                    </div>

                    <!-- Linked Account LIST -->
                    <div class="row mt-4" t-if="linked_accounts">
                        <t t-foreach="linked_accounts" t-as="account">
                            <div class="col-md-4">
                                <div class="card mb-3" style="max-width: 540px;">
                                    <t t-set="media_sudo" t-value="account.media_id.sudo()"/>
                                    <div class="row no-gutters">
                                        <div class="col-md-4 border-right">
                                            <img class="img img-fluid w-100" t-attf-src="/web/image/social.account/#{account.id}/image"/>
                                        </div>
                                        <div class="col-md-8">
                                            <div class="card-body p-3">
                                                <h5 class="card-title mb-1" t-esc="account.name"/>
                                                <small class="dr_media_pill border">
                                                    <img class="dr_media_icon" t-attf-src="/dr_social_website/static/src/img/#{media_sudo.media_type}.svg"/>
                                                    <t t-esc="media_sudo.name"/>
                                                </small>
                                                <div class="dr_status bg-danger" t-if="account.is_media_disconnected">
                                                    <i class="fa fa-chain-broken" />
                                                </div>
                                                <div class="dr_status bg-success" t-else="">
                                                    <i class="fa fa-check" />
                                                </div>
                                                <div t-if="account.is_media_disconnected" class="mt-1">
                                                    <small class="text-danger"> Disconncted </small>
                                                    <button class="btn bg-danger btn-sm dr_relink_btn" t-att-data-media-id="media_sudo.id"> <i class="fa fa-link"></i> Relink </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </t>
                        <t t-if="isOnbording">
                            <div class="col-12 d-flex justify-content-center">
                                <a role="button" class="btn btn-primary btn-lg m-3" href="/social/thank_you">
                                Finish
                                </a>
                            </div>
                        </t>
                    </div>

                    <div class="row" t-else="">
                        <div class="col-12">
                            <div class="bg-100 rounded my-4 py-5 text-center" style="box-shadow: 0px 0px 19px rgba(0, 0, 0, 0.05) inset;">
                                <h4 class="mb-0 text-muted"> You havn't linked any account. </h4>
                                <small class="mb-0 text-muted"> Please link your social account with given button. </small>
                                <div>
                                    <button type="button" class="dr_social_link btn text-muted rounded-circle  text-muted mt-2 border" style="border: 1px solid #b1b1b1 !important;">
                                        <span class="fa fa-plus-circle" style="font-size: 14px;padding-right: 3px;"></span>
                                            <b> LINK NEW ACCOUNT </b>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </t>
    </template>

    <template id="my_social_account_link" name="Link to social portal" inherit_id="portal.user_dropdown">
        <xpath expr="//*[@id='o_logout_divider']" position="before">
            <a href="/social/home" role="menuitem" class="dropdown-item"> Social Accounts </a>
        </xpath>
    </template>

    <template id="portal_my_home" name="Show social accounts" customize_show="True" inherit_id="portal.portal_my_home" priority="20">
        <xpath expr="//div[hasclass('o_portal_docs')]" position="inside">
            <t t-call="portal.portal_docs_entry">
                <t t-set="title">Social Accounts</t>
                <t t-set="url" t-value="'/social/home'"/>
                <t t-set="placeholder_count" t-value="'social_count'"/>
            </t>
        </xpath>
    </template>

    <template id="dr_thankyou" name="Thank You">
        <t t-call="website.layout">
            <div class="container dr_thankyou text-center my-3">
                <div class="row text-center">
                    <div class="col-12">
                        <h1 class="font-weight-bold h3 my-3"><span class="pg-primarys">Thanks!</span>
                            <span style="font-family: Oxygen, Ubuntu, Cantarell, 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;"> You're all setup!</span></h1>
                        <div class="progress my-4">
                            <div class="progress-bars w-100 progress-bar-striped" role="progressbar" style="width: 100%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100">
                                <span class="dr_done text-center">Done!</span>
                            </div>
                        </div>
                        <p class="text-muted">You will receive an email from your account manager in next 24 hours. this is a greatetime to get to know your<br/>
                        account manager and  send over any questions you may still have.</p>
                        <p class="my-3 text-muted">Your account manager will send over your first 7 posts sortly after that!</p>
                        <img src="/dr_social_website/static/src/img/thankyou.png" class="img mt-4 img-fluid w-100" style="max-width: 500px;"/>
                    </div>
                </div>
            </div>
        </t>
    </template>

    <template id="dr_sign_in_template" name="Sign in to sign up" inherit_id="portal.user_sign_in">
        <xpath expr="//li" position="replace">
            <li groups="base.group_public" t-attf-class="#{_item_class} o_no_autohide_item">
                <a t-attf-class="#{_link_class}" t-attf-href="/web/signup?{{ keep_query() }}">Sign up</a>
            </li>
        </xpath>
    </template>

</odoo>
